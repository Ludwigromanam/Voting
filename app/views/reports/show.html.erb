<% content_for :head do %>
<%= javascript_include_tag "/javascripts/jquery.flot.pack.js" %>
<%= javascript_include_tag "/javascripts/excanvas.pack.js" %>
<% end %>
 <div id="placeholder" style="width:600px;height:300px;"></div>
<script id="source" language="javascript" type="text/javascript">
$(function () {
    var num_of_participants = <%= @report.participants.count %>;
    
	$.plot($("#placeholder"), [
        <% @report.poll.questions.each do |q| %>  
        {
            data: [[0,<%= AnsweredQuestion.num_correct(q) %>]],
            bars: { show: true}
        },
        <% end %>

		{
		       // label: 'Failed',
		        data: [[0,10]],
		        bars: { show: true}
		},
		{
		     //   label: 'Passed',
		        data: [[1,15]],
		        bars: { show: true }
		},
		{
		     //   label: 'Not Run',
		        data: [[2,30]],
		        bars: { show: true }
		},
		{
		     //   label: 'Blocked',
		        data: [[3,5]],
		        bars: { show: true }
		},
		{
		      //  label: 'In Progress',
		        data: [[4,40]],
		        bars: { show: true }
		}
	],
	{
		xaxis: {
		        max : num_of_participants,
		        ticks: [[1/2, "Failed"], [1.5, "Passed"], [2.5, "Not Run"], [3.5, "Blocked"], [4.5, "In Progress"]],
		       
		},
		legend: {
		        show: false
		}

	});
});
	</script>





<% content_for :title do %>
  Report for:<%=@report.poll.title%>
<% end %>

<% content_for :notice do %>
  <%= notice %>
<% end %>

<h2> User stuff </h2>
<% @report.participants.each do |p| %>
  User: <%= p.id %><br/>
  <% p.answered_questions.each do |a| %>

    Question: <%= a.question.body %>
    Answer: <%= a.answer.body %>

    Question: <%= a.question.body %> <br/>
    Answer: <%= a.answer.body %><br/>

  <% end %>
<% end %>

<h2> Question stuff </h2>
<% @report.poll.questions.each do |q| %>
  <%= q.body %> - <%= AnsweredQuestion.num_correct(q) %> <br/>
<% end %>


<hr/>

<p>
  <b>Date:</b>
  <%= @report.poll.created_at %>(Format Later)
</p>

<p>
  <b>Number of Questions:</b>
  <%= @report.poll.questions.count %>
</p>

<p>
  <b>Number of Participants:</b>
     To be implemented
</p>

<p>
  <b>Average Score:</b>
  To be Implemented
</p>





<%= link_to 'Back', reports_path %>

<% content_for :head do %>
  <%= javascript_include_tag "/javascripts/jquery.flot.pack.js" %>
  <%= javascript_include_tag "/javascripts/excanvas.pack.js" %>
  <%= javascript_include_tag "report_monitor.js" %>
<% end %>

<% content_for :title do %>
  Report for:<%=@report.poll.title%>
<% end %>

<% content_for :notice do %>
  <%= notice %>
<% end %>

<div id="placeholder" style="width:600px;height:300px;">
    Total Participants:<span class="num_of_participants"><%= @report.participants.count %></span></td>
    <table>
        <thead> 
            <tr>
                <th>Question Number</th>
                <th>Number of Correct Answers</th>
            </tr>
        </thead>
        <tbody>
            <% @report.poll.questions.each do |q| %>  
                <tr>    
                    <td><%= q.body %></td>
                    <td class="correct_answer"><%= AnsweredQuestion.num_correct(q).to_s %></td>
                </tr>   
            <% end %>
        </tbody>
    </table>
</div>

<h2> User stuff </h2>
<% @report.participants.each do |p| %>
  User: <%= p.id %><br/>
  <% p.answered_questions.each do |a| %>

    Question: <%= a.question.body %>
    Answer: <%= a.answer.body %>

    Question: <%= a.question.body %> <br/>
    Answer: <%= a.answer.body %><br/>

  <% end %>
<% end %>

<h2> Question stuff </h2>
<% @report.poll.questions.each do |q| %>
  <%= q.body %> - <%= AnsweredQuestion.num_correct(q) %> <br/>
<% end %>

<p>
  <b>Date:</b>
  <%= @report.poll.created_at %>(Format Later)
</p>

<p>
  <b>Number of Questions:</b>
  <%= @report.poll.questions.count %>
</p>

<p>
  <b>Number of Participants:</b>
     <%= @report.participants.count%>
</p>

<p>
  <b>Average Score:</b>
  To be Implemented
</p>


<%= link_to 'Back', reports_path %>

<% content_for :head do %>
  <%= javascript_include_tag "/javascripts/jquery.flot.pack.js" %>
  <%= javascript_include_tag "/javascripts/excanvas.pack.js" %>
  <%= javascript_include_tag "report_monitor.js" %>
<% end %>

<% content_for :title do %>
  Report for:<%=@report.poll.title%>
<% end %>

<% content_for :notice do %>
  <%= notice %>
<% end %>

<div id="placeholder" style="width:600px;height:300px;display:none">
</div>

<div id="temp-table">
  <span id="report-id">Report id:<%= @report.id %></span><br/>
  Total Participants:<span class="num_of_participants"><%= @report.participants.count %></span>
  <table>
      <thead> 
          <tr>
              <th>Question Number</th>
              <th>Number of Correct Answers</th>
          </tr>
      </thead>
      <tbody>
          <% @report.poll.questions.each do |q| %>  
              <tr>    
                  <td><%= q.body %></td>
                  <td class="correct_answer"><%= AnsweredQuestion.num_correct(q).to_s %></td>
              </tr>   
          <% end %>
      </tbody>
  </table>
</div>

Total Participants:
<span class="num_of_participants"><%= @report.participants.count %></span>
<hr/>

<% @report.poll.questions.each_with_index do |q, i| %>
    <div id="placeholder<%= i %>"></div>
    <div id="question">
        
        
        <div class="question_name"><%= q.body %></div>
        <table>
            <thead>
                <tr>
                    <% q.answers.each do |a| %>
                        <th><%= a.body %></th>
                    <% end %>
                </tr>
            </thead>
            <tr>
                <% q.answers.each do |a| %>
                    <td><%= a.picked(@report)%> Participant(s) picked this answer</td>                            
                <%end%>
            </tr>
        </table>
    </div>
<% end %>

<p>
  <b>Date:</b>
  <%= @report.poll.created_at %>(Format Later)
</p>

<%= link_to 'View all reports', reports_path %>
